<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="sins/MOMstyle.css" />
    <script src='sins/jquery.min.js'></script>
    <script src='sins/jquery-ui.min.js'></script>
    <script type="text/javascript" >

        // balls start here
        var KE;
        var Na;
        var R;
        var temp;

        R=8.314;
        Na=6.022*10^23;

        var k=1;
        var ball=[];
        var ballCount=10;
        var dx=2;
        var dy=-2;
        for(var i=0;i<ballCount;i++){
            ball[i]={x:0,y:0,dx:2,dy:-2,color:"rgba("+Math.ceil(Math.random()*256)+","+Math.ceil(Math.random()*256)+","+Math.ceil(Math.random()*256)+","+Math.ceil(Math.random()*256)+")"}
        }
        var ballRadius=20;
        var canvas;
        var ctx;
        var x;
        var y;

        function start() {

            canvas=document.getElementById("simscreen");
            ctx=canvas.getContext("2d");
            ctx.canvas.width=550;
            ctx.canvas.height=400;
            x=canvas.height-20;
            y=canvas.width/2;

        }

        function draw(){
            ctx.clearRect(0,0,canvas.width,canvas.height);
            for(var i=0;i<ballCount;i++){

                if(k===1){

                    ball[i].x=Math.random()*canvas.width-ballRadius;
                    ball[i].y=Math.random()*canvas.height-ballRadius;

                }
                ctx.beginPath();
                ctx.arc(ball[i].x,ball[i].y,ballRadius,0,Math.PI*2);
                ctx.fillStyle=ball[i].color;
                ctx.fill();
                ctx.closePath();

            }
            move();
            rebound();
        }

        function move(){

            for(var i=0;i<ballCount;i++){
                ball[i].x=ball[i].x+ball[i].dx;
                ball[i].y=ball[i].y+ball[i].dy;
                k=0;
            }

        }

        function speed(){

            
        }
        function rebound(){
            for(var i=0;i<ballCount;i++){
                if(ball[i].x+ball[i].dx>canvas.width-ballRadius||ball[i].x+ball[i].dx<ballRadius)
                {
                    ball[i].dx=-ball[i].dx+Math.random();
                }
                if(ball[i].y+ball[i].dy>canvas.height-ballRadius||ball[i].y+ball[i].dy<ballRadius)
                {
                    ball[i].dy=-ball[i].dy+Math.random()+0.2;
                }
            }
        }

        setInterval(draw,10);
        draw();

        // balls end here

        function simstate() {

            if (k===1){
                document.getElementById('playpausebutton').src="sins/bluepausedull.png";
                k=0;

                $('#l1spinner').spinner("disable");

                $('#l1slider').slider("disable");

                if (temp===0)
                {
                    document.getElementById("p6").innerHTML="Entropy of the system, S=0";
                }


            }

            else {
                document.getElementById('playpausebutton').src="sins/blueplaydull.png";
                flag=true;

                $('#l1spinner').spinner("enable");

                $('#l1slider').slider("enable");

                document.getElementById("p6").innerHTML="";

            }
        }

        function temp_val(input){

            temp=input;
            document.getElementById("p1").innerHTML="Temperature : "+temp+" K";
        }

        function kinetic_val(input){

            KE=input;
            document.getElementById("p2").innerHTML="Kinetic Energy : "+KE+" J";

        }
        function varinit() {

            varchange();

            //Variable r1 slider and number input types

            $('#l1slider').slider("value", 0);
            $('#l1spinner').spinner("value", 0);
            $('#l2slider').slider("value", 0);
            $('#l2spinner').spinner("value", 0);

        }

        function varchange()
        {

            // Variable r1 slider and number input types

            $('#l1slider').slider({ max : 240, min : 0, step : 20 });		    // slider initialisation : jQuery widget
            $('#l1spinner').spinner({ max : 240, min : 0, step : 20 });		    // number initialisation : jQuery widget

            // monitoring change in value and connecting slider and number
            // monitoring change in value and connecting slider and number
            // setting trace point coordinate arrays to empty on change of link length

            // temperature

            $( "#l1slider" ).on(  "slide",  function( e, ui ) {
                $('#l1spinner').spinner("value",ui.value);
                temp_val(ui.value);
            });

            $( "#l1spinner" ).on( "spin",   function( e, ui ) {
                $('#l1slider').slider("value",ui.value);
                temp_val(ui.value);
            });

            temp_val($('#l1spinner').spinner("value"));


            $( "#l1spinner" ).on( "change", function() {
                varchange() } );


            varupdate();
        }

        function varupdate()
        {

            $('#l1slider').slider("value", $('#l1spinner').spinner('value'));  //updating slider location with change in spinner(debug)
        }

    </script>
</head>

<body onload="varinit();start();">
<!-- Defining Container for Simulation -->
<noscript>
    The simulation requires JavaScript to be enabled.
</noscript>
<div id="container">
    <!-- Replace TITLE with simulation title to be displayed next to logo-->
    <div id="simtitle">Third Law of Thermodynamics</div>
    <!-- Region for simulation display -->
    <canvas id="simscreen" height="400px" width="550px"></canvas>
    <div id="titleincanvas"></div>
    <!-- Region for comment / question prompts -->
    <div id="commentboxleft">
        <p id="p1" style="line-height:0.4"></p>
        <p id="p2" style="line-height:0.4"></p>
    </div>
    <div id="commentboxright">
        <p id="p6" style="line-height:0.4"></p>
    </div>

    <!-- DND-Title of region for variables display -->
    <div id="vartitle">VARIABLES</div>

    <!-- Region for Input parameters of simulation -->
    <div id="variables">
        <div class="variable">
            <div class="varname"><p title="Link Length" style="font-size:95%;">Temperature (K)</p>
                <input id="l1spinner"></div>
            <div id="l1slider"></div>
            <br>
        </div>
    </div>
    <!-- DND-Title of region for controls display -->
    <div id="ctrltitle">CONTROLS</div>
    <!-- Region for User controls of simulation -->
    <div id="controls">
        <img id="playpausebutton" onclick="simstate();" src="sins/blueplaydull.png" />
        <img id="rotationbutton" onclick="location.reload();" src="sins/bluecwdull.png" />
    </div>
    <!-- DND-Copyright display-->
    <div id="copyright" title="Developer : SOLVEr"> Copyright &copy; SOLVE The Virtual Lab @ NITK Surathkal </div>

</div><!-- Container div close -->
</body>
</html>